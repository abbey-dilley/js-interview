/* js-interview-core 
*/var Dictionary=function(){function a(){this.clear()}return a.prototype.clear=function(){this.keys=[],this.values=[]},a.prototype.containsKey=function(a){return this.keyIndex(a)>=0},a.prototype.setValue=function(a,b){var c=this.keyIndex(a);c<0?this.addElement(a,b):this.updateElement(c,b)},a.prototype.getValue=function(a){var b=this.keyIndex(a);return b>=0?this.values[b]:null},a.prototype.remove=function(a){this.removeElement(a)},a.prototype.size=function(){return this.keys.length},a.prototype.getKeys=function(){return this.keys},a.prototype.getValues=function(){return this.values},a.prototype.keyIndex=function(a){return this.keys.indexOf(a)},a.prototype.addElement=function(a,b){this.keys.push(a),this.values.push(b)},a.prototype.removeElement=function(a){var b=this.keys.indexOf(a);b>=0&&(this.keys.splice(b,1),this.values.splice(b,1))},a.prototype.updateElement=function(a,b){this.values[a]=b},a}(),EventBus=function(){function a(){if(a.instance)throw new Error("EventBus Singleton Already Initialised");this.eventDispatcher=new EventDispatcher,a.instance=this}return a.prototype.addEventListener=function(a,b,c){this.eventDispatcher.addEventListener(a,b,c)},a.prototype.removeEventListener=function(a,b){this.eventDispatcher.removeEventListener(a,b)},a.prototype.dispatchEvent=function(a){this.eventDispatcher.dispatchEvent(a)},a.getInstance=function(){return null===a.instance&&(a.instance=new a),a.instance},a.instance=null,a}(),EventDispatcher=function(){function a(){this.eventHandlers=new Dictionary}return a.prototype.addEventListener=function(a,b,c){var d;this.eventHandlers.containsKey(a)?d=this.eventHandlers.getValue(a):(d=new Dictionary,this.eventHandlers.setValue(a,d)),d.setValue(c,ObjectUtil.delegate(b,c))},a.prototype.removeAllListeners=function(){this.eventHandlers=new Dictionary},a.prototype.removeEventListener=function(a,b){var c;this.eventHandlers.containsKey(a)&&(c=this.eventHandlers.getValue(a),c.remove(b))},a.prototype.dispatchEvent=function(a){var b,c=a.type;if(this.eventHandlers.containsKey(c)){b=this.eventHandlers.getValue(c);for(var d=b.getKeys(),e=0;e<d.length;e++){var f=d[e],g=b.getValue(f);g.apply(f,[a])}}},a}(),EventObject=function(){function a(a,b){void 0===b&&(b=null),this._type=a,this._currentTarget=b}return Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),a}(),EventType=function(){function a(){}return a.COMPLETE="EventType.COMPLETE",a}(),GraphicsUtil=function(){function a(){}return a.isInBounds=function(b,c){var d=a.globalPosition(b),e=a.globalPosition(c),f=new PIXI.Rectangle(d.x,d.y,b.width,b.height);return f.contains(e.x,e.y)},a.globalPosition=function(a){return new PIXI.Point(a.worldTransform.tx,a.worldTransform.ty)},a.createRectangle=function(a,b,c){void 0===b&&(b=65280),void 0===c&&(c=0);var d=new PIXI.Graphics;return d.beginFill(b,c),d.drawRect(0,0,a.x,a.y),d.endFill(),d},a}(),FilePath=function(){function a(a){this._type=a.nodeName,this._url=a.getAttribute("url"),this._id=a.getAttribute("id")}return Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),a.PREFIX="FilePath",a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},FontFilePath=function(a){function b(b){a.call(this,b)}return __extends(b,a),b}(FilePath),PNGFilePath=function(a){function b(b){a.call(this,b)}return __extends(b,a),b}(FilePath),SpriteSheetFilePath=function(a){function b(b){a.call(this,b),this._frames=parseInt(b.getAttribute("frames"))}return __extends(b,a),Object.defineProperty(b.prototype,"frames",{get:function(){return this._frames},enumerable:!0,configurable:!0}),b}(FilePath),Logger=function(){function a(){}return a.debug=function(a){window.console.log("Debug "+a)},a.warn=function(a){window.console.log("Warn "+a)},a.error=function(a){window.console.log("Error "+a)},a}(),ObjectUtil=function(){function a(){}return a.delegate=function(a,b){return function(){return a.apply(b,arguments)}},a.reflect=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e=Object.create(a[b].prototype);return e.constructor.apply(e,c),e},a}(),Timer=function(a){function b(b,c){void 0===c&&(c=0),a.call(this),this.delay=b,this.currentCount=this.repeatCount=c}return __extends(b,a),b.prototype.start=function(){this.isRunning||(this.isRunning=!0,this.interval=window.setInterval(ObjectUtil.delegate(this.handleTimerUpdate,this),this.delay))},b.prototype.handleTimerUpdate=function(){this.repeatCount>0?(this.currentCount--,0==this.currentCount?(this.stop(),this.dispatchEvent(new TimerEvent(TimerEvent.COMPLETE))):this.dispatchEvent(new TimerEvent(TimerEvent.TIMER))):this.dispatchEvent(new TimerEvent(TimerEvent.TIMER))},b.prototype.stop=function(){this.isRunning=!1,window.clearInterval(this.interval)},b.prototype.reset=function(){this.stop(),this.currentCount=this.repeatCount},b}(EventDispatcher),TimerEvent=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.TIMER="TimerEvent.TIMER",b.COMPLETE="TimerEvent.COMPLETE",b}(EventObject),AbstractRenderer=function(){function a(){if(a.instance)throw new Error("Renderer Singleton Already Initialised");a.instance=this}return a.prototype.initialise=function(a){return this.properties=new RendererProperties(a),this.setResolution(),this.setFrameRate(),this.create(),this.registerDocument(),this.start(),this},a.prototype.create=function(){this.createCore(),this.createView(),this.createRenderer(),this.createStage(),this.createHolder()},a.prototype.setResolution=function(){var a=window.devicePixelRatio;(isNaN(a)||a<1)&&(a=1),this.properties.resolution=a},a.prototype.setFrameRate=function(){this.ticker=PIXI.ticker.shared,this.ticker.autoStart=!1,this.ticker.stop(),this.ticker.speed=this.properties.targetFrameRate/(1e3*PIXI.TARGET_FPMS)},a.prototype.createCore=function(){this.core=EventBus.getInstance()},a.prototype.registerDocument=function(){var a=$(document);a.on("touchmove",function(a){a.preventDefault()})},a.prototype.createView=function(){var a=this.getWindowSize();this.properties.view?this.view=this.properties.view:this.createCanvas(a)},a.prototype.createCanvas=function(a){this.view=document.createElement("canvas"),this.view.width=a.x,this.view.height=a.y,this.properties.view=this.view,document.body.appendChild(this.view)},a.prototype.createStage=function(){this.stage=new PIXI.Container,this.stage.interactive=!0},a.prototype.createHolder=function(){this.holder=new PIXI.Container,this.stage.addChild(this.holder)},a.prototype.createRenderer=function(){this.renderer=this.createAutoRenderer(this.properties.size)},a.prototype.createAutoRenderer=function(a){return PIXI.autoDetectRenderer(a.x,a.y,this.properties)},a.prototype.createWebGLRenderer=function(a){return new PIXI.WebGLRenderer(a.x,a.y,this.properties)},a.prototype.createCanvasRenderer=function(a){return new PIXI.CanvasRenderer(a.x,a.y,this.properties)},a.prototype.start=function(){var a=PIXI.ticker.shared;a.add(this.render,this),a.start()},a.prototype.render=function(){this.renderer.render(this.stage)},a.prototype.dispatchCoreEvent=function(a){this.core.dispatchEvent(a)},a.prototype.addChild=function(a){this.holder.addChild(a)},a.prototype.removeChild=function(a){this.holder.removeChild(a)},a.prototype.setAutoResize=function(a){this.properties.autoResize=a},a.prototype.getWindowSize=function(){return new PIXI.Point(window.innerWidth,window.innerHeight)},a.prototype.getStage=function(){return this.stage},a.prototype.getRenderer=function(){return this.renderer},a.prototype.getView=function(){return this.view},a.prototype.getHolder=function(){return this.holder},a.prototype.getFrameRate=function(){return this.properties.targetFrameRate},a.prototype.getResolution=function(){return this.properties.resolution},a.prototype.getGameSize=function(){return this.properties.size},a.prototype.getTicker=function(){return this.ticker},a.prototype.getContainerDom=function(){return this.containerDOM},a.getInstance=function(){return null===a.instance&&(a.instance=new a),a.instance},a.instance=null,a}(),RendererProperties=function(){function a(a){this.size=a,this.autoResize=!0,this.transparent=!1,this.antialias=!1,this.targetFrameRate=30,this.minFrameRate=15,this.resolution=1,this.view=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!0,this.restrictScale=!0}return a}(),MouseUtil=function(){function a(){}return a.setInteractive=function(a,b){a.buttonMode=a.interactive=b},a.addMouseDown=function(a,b,c){a.on("mousedown",b,c)},a.addMouseUp=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),a.on("mouseup",b,c),a.on("mouseupoutside",b,c)},a.addMouseOver=function(a,b,c){a.on("mouseover",b,c)},a.addMouseOut=function(a,b,c){a.on("mouseout",b,c)},a.addMouseMove=function(a,b,c){a.on("mousemove",b,c)},a.addMouseBlock=function(a,b,c){a.interactive=!0,b?this.addMouseUp(a,b,c):(a.on("mouseup",this.handleMouseBlock,this),a.on("mouseupoutside",this.handleMouseBlock,this)),a.on("mousedown",this.handleMouseBlock,this),a.on("mouseover",this.handleMouseBlock,this),a.on("mouseout",this.handleMouseBlock,this)},a.removeMouseDown=function(a,b){a.off("mousedown",b)},a.removeMouseUp=function(a,b){a.off("mouseup",b),a.off("mouseupoutside",b)},a.removeMouseOver=function(a,b){a.off("mouseover",b)},a.removeMouseOut=function(a,b){a.off("mouseout",b)},a.removeMouseMove=function(a,b){a.off("mousemove",b)},a.handleMouseBlock=function(a){a.data.originalEvent&&a.data.originalEvent.stopImmediatePropagation()},a}();